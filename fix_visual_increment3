# HG changeset patch
# Parent 95ae92d073b31df8a5841f80a1e680e3fd7bece9
diff --git a/src/ops.c b/src/ops.c
--- a/src/ops.c
+++ b/src/ops.c
@@ -5423,6 +5423,7 @@ do_addsub(command, Prenum1, g_cmd)
 	}
 	if (VIsual_mode == 'V')
 	    VIsual.col = 0;
+	col = curwin->w_cursor.col;
 
 	ptr = ml_get(VIsual.lnum);
 	RLADDSUBFIX(ptr);
@@ -5432,7 +5433,7 @@ do_addsub(command, Prenum1, g_cmd)
 	curbuf->b_visual.vi_end = curwin->w_cursor;
 	curbuf->b_visual.vi_mode = VIsual_mode;
 
-	col = VIsual.col;
+	col = VIsual.col < curwin->w_cursor.col ? VIsual.col : col;
 	lnum = VIsual.lnum;
 	lnume = curwin->w_cursor.lnum;
     }
diff --git a/src/testdir/test_increment.in b/src/testdir/test_increment.in
--- a/src/testdir/test_increment.in
+++ b/src/testdir/test_increment.in
@@ -114,6 +114,16 @@ 0
     -1
     -2
     -3
+8) Block increment on 0x9
+Text:
+0x9
+0x9
+    1) Ctrl-A on visually block selected region (cursor at beginning):
+    0xa
+    0xa
+    2) Ctrl-A on visually block selected region (cursor at end)
+    0xa
+    0xa
 
 STARTTEST
 :so small.vim
@@ -161,6 +171,12 @@ v3kg
 V4k:.+put a
 V4k
 
+:" Test 8
+:/^S8=/+,/^E8=/-y a
+:/^E8=/+put a
+kj$:.+put a
+k$+
+
 :" Save the report
 :/^# Test 1/,$w! test.out
 :qa!
@@ -233,6 +249,11 @@ E7====
 
 
 
+# Test 8
+S8====
+0x9
+0x9
+E8====
 
 
 
diff --git a/src/testdir/test_increment.ok b/src/testdir/test_increment.ok
--- a/src/testdir/test_increment.ok
+++ b/src/testdir/test_increment.ok
@@ -111,8 +111,17 @@ 0
 -2
 -3
 
+# Test 8
+S8====
+0x9
+0x9
+E8====
 
+0xa
+0xa
 
+0xa
+0xa
 
 
 
