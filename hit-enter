# HG changeset patch
# Parent c5ec82980e82ffcd31f84a990d5cc864329d643f
diff --git a/src/message.c b/src/message.c
--- a/src/message.c
+++ b/src/message.c
@@ -887,6 +887,8 @@
     int		oldState;
     int		tmpState;
     int		had_got_int;
+    int		had_Recording = Recording;
+    FILE	*had_scriptout = scriptout;
 
     if (redraw == TRUE)
 	must_redraw = CLEAR;
@@ -957,11 +959,18 @@
 	     * typeahead buffer. */
 	    ++no_mapping;
 	    ++allow_keys;
+	    /* temporarily disable Recording. If Recording is active, the char
+	     * will be recorded later, since the character will be added to the
+	     * typebuf after the loop */
+	    Recording = FALSE;
+	    scriptout = NULL;
 	    c = safe_vgetc();
 	    if (had_got_int && !global_busy)
 		got_int = FALSE;
 	    --no_mapping;
 	    --allow_keys;
+	    Recording = had_Recording;
+	    scriptout = had_scriptout;
 
 #ifdef FEAT_CLIPBOARD
 	    /* Strange way to allow copying (yanking) a modeless selection at
