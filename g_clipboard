# HG changeset patch
# Parent 9f59d424b0997f7050fbf69e5dfb9b3f37ee23a3
diff --git a/runtime/doc/options.txt b/runtime/doc/options.txt
--- a/runtime/doc/options.txt
+++ b/runtime/doc/options.txt
@@ -1502,6 +1502,8 @@ A jump table for the options with a shor
 			or not.  The clipboard register can always be
 			explicitly accessed using the "* notation.  Also see
 			|gui-clipboard|.
+			(Note: will be reset for |:g| commands when there
+			are many matches to prevent hanging system)
 
 						*clipboard-unnamedplus*
 	unnamedplus	A variant of the "unnamed" flag which uses the
@@ -1516,6 +1518,9 @@ A jump table for the options with a shor
 			Availability can be checked with: >
 				if has('unnamedplus')
 <
+			(Note: will be reset for |:g| commands when there
+			are many matches to prevent hanging system)
+
 						*clipboard-autoselect*
 	autoselect	Works like the 'a' flag in 'guioptions': If present,
 			then whenever Visual mode is started, or the Visual
diff --git a/src/ex_cmds.c b/src/ex_cmds.c
--- a/src/ex_cmds.c
+++ b/src/ex_cmds.c
@@ -5421,6 +5421,9 @@ ex_global(eap)
     regmmatch_T	regmatch;
     int		match;
     int		which_pat;
+#ifdef FEAT_CLIPBOARD
+    int		save_clip_unnamed = clip_unnamed;
+#endif
 
     if (global_busy)
     {
@@ -5511,10 +5514,20 @@ ex_global(eap)
 	    smsg((char_u *)_("Pattern not found: %s"), pat);
     }
     else
+    {
+#ifdef FEAT_CLIPBOARD
+	if (ndone > 100)
+	    /* reset clipboard for more then 100 matches (prevents hanging Windows) */
+	    clip_unnamed = 0;
+#endif
 	global_exe(cmd);
+    }
 
     ml_clearmarked();	   /* clear rest of the marks */
     vim_regfree(regmatch.regprog);
+#ifdef FEAT_CLIPBOARD
+    clip_unnamed = save_clip_unnamed;
+#endif
 }
 
 /*
