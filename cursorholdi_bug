
A CursorHoldI autocommand breaks 0<ctrl-d> in insert mode
(See :h i_0_CTRL-D) This patch fixes it.

Reported by Gary Johnson at 
https://groups.google.com/forum/#!topic/vim_dev/zjLIQlrAN6c

# HG changeset patch
# Parent 75bdd4d30f98d5ae62107228704727101a63226f
diff --git a/src/edit.c b/src/edit.c
--- a/src/edit.c
+++ b/src/edit.c
@@ -757,7 +757,8 @@ edit(cmdchar, startln, count)
 	/*
 	 * Get a character for Insert mode.  Ignore K_IGNORE.
 	 */
-	lastc = c;			/* remember previous char for CTRL-D */
+	if (c != K_CURSORHOLD)
+	    lastc = c;			/* remember previous char for CTRL-D */
 	do
 	{
 	    c = safe_vgetc();
